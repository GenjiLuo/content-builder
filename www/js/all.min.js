!function(){"use strict";var e=angular.module("smoothScroll",[]),t=function(e,t){t=t||{};var n=t.duration||800,o=t.offset||0,r=t.easing||"easeInOutQuart",i=t.callbackBefore||function(){},a=t.callbackAfter||function(){},c=document.getElementById(t.containerId)||null,l=void 0!=c&&null!=c,s=function(){return l?c.scrollTop:window.pageYOffset?window.pageYOffset:document.documentElement.scrollTop},u=function(e,t){switch(e){case"easeInQuad":return t*t;case"easeOutQuad":return t*(2-t);case"easeInOutQuad":return t<.5?2*t*t:-1+(4-2*t)*t;case"easeInCubic":return t*t*t;case"easeOutCubic":return--t*t*t+1;case"easeInOutCubic":return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1;case"easeInQuart":return t*t*t*t;case"easeOutQuart":return 1- --t*t*t*t;case"easeInOutQuart":return t<.5?8*t*t*t*t:1-8*--t*t*t*t;case"easeInQuint":return t*t*t*t*t;case"easeOutQuint":return 1+--t*t*t*t*t;case"easeInOutQuint":return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t;default:return t}},d=function(e){var t=0;if(e.offsetParent)do t+=e.offsetTop,e=e.offsetParent;while(e);return t=Math.max(t-o,0)};setTimeout(function(){var t,o,h,f,p=null,m=s(),v=d(e),g=0,y=v-m,k=function(){p=s(),l?(h=c.scrollHeight,f=c.clientHeight+p):(h=document.body.scrollheight,f=window.innerHeight+p),(o==v||p==v||f>=h)&&(clearInterval(E),a(e))},w=function(){g+=16,t=g/n,t=t>1?1:t,o=m+y*u(r,t),l?c.scrollTop=o:window.scrollTo(0,o),k()};i(e);var E=setInterval(w,16)},0)};e.factory("smoothScroll",function(){return t}),e.directive("smoothScroll",["smoothScroll",function(e){return{restrict:"A",scope:{callbackBefore:"&",callbackAfter:"&"},link:function(t,n,o){"undefined"!=typeof o.scrollIf&&"true"!==o.scrollIf||setTimeout(function(){var r=function(e){if(o.callbackBefore){var n=t.callbackBefore({element:e});"function"==typeof n&&n(e)}},i=function(e){if(o.callbackAfter){var n=t.callbackAfter({element:e});"function"==typeof n&&n(e)}};e(n[0],{duration:o.duration,offset:o.offset,easing:o.easing,callbackBefore:r,callbackAfter:i,containerId:o.containerId})},0)}}}]),e.directive("scrollTo",["smoothScroll",function(e){return{restrict:"A",scope:{callbackBefore:"&",callbackAfter:"&"},link:function(t,n,o){var r;n.on("click",function(n){if(n.preventDefault(),r=document.getElementById(o.scrollTo)){var i=function(e){if(o.callbackBefore){var n=t.callbackBefore({element:e});"function"==typeof n&&n(e)}},a=function(e){if(o.callbackAfter){var n=t.callbackAfter({element:e});"function"==typeof n&&n(e)}};return e(r,{duration:o.duration,offset:o.offset,easing:o.easing,callbackBefore:i,callbackAfter:a,containerId:o.containerId}),!1}})}}}])}(),function(){"use strict";function e(t,o){function r(e,t){return function(){return e.apply(t,arguments)}}var i;if(o=o||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=o.touchBoundary||10,this.layer=t,this.tapDelay=o.tapDelay||200,this.tapTimeout=o.tapTimeout||700,!e.notNeeded(t)){for(var a=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],c=this,l=0,s=a.length;l<s;l++)c[a[l]]=r(c[a[l]],c);n&&(t.addEventListener("mouseover",this.onMouse,!0),t.addEventListener("mousedown",this.onMouse,!0),t.addEventListener("mouseup",this.onMouse,!0)),t.addEventListener("click",this.onClick,!0),t.addEventListener("touchstart",this.onTouchStart,!1),t.addEventListener("touchmove",this.onTouchMove,!1),t.addEventListener("touchend",this.onTouchEnd,!1),t.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(t.removeEventListener=function(e,n,o){var r=Node.prototype.removeEventListener;"click"===e?r.call(t,e,n.hijacked||n,o):r.call(t,e,n,o)},t.addEventListener=function(e,n,o){var r=Node.prototype.addEventListener;"click"===e?r.call(t,e,n.hijacked||(n.hijacked=function(e){e.propagationStopped||n(e)}),o):r.call(t,e,n,o)}),"function"==typeof t.onclick&&(i=t.onclick,t.addEventListener("click",function(e){i(e)},!1),t.onclick=null)}}var t=navigator.userAgent.indexOf("Windows Phone")>=0,n=navigator.userAgent.indexOf("Android")>0&&!t,o=/iP(ad|hone|od)/.test(navigator.userAgent)&&!t,r=o&&/OS 4_\d(_\d)?/.test(navigator.userAgent),i=o&&/OS [6-7]_\d/.test(navigator.userAgent),a=navigator.userAgent.indexOf("BB10")>0;e.prototype.needsClick=function(e){switch(e.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(e.disabled)return!0;break;case"input":if(o&&"file"===e.type||e.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(e.className)},e.prototype.needsFocus=function(e){switch(e.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!n;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!e.disabled&&!e.readOnly;default:return/\bneedsfocus\b/.test(e.className)}},e.prototype.sendClick=function(e,t){var n,o;document.activeElement&&document.activeElement!==e&&document.activeElement.blur(),o=t.changedTouches[0],n=document.createEvent("MouseEvents"),n.initMouseEvent(this.determineEventType(e),!0,!0,window,1,o.screenX,o.screenY,o.clientX,o.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,e.dispatchEvent(n)},e.prototype.determineEventType=function(e){return n&&"select"===e.tagName.toLowerCase()?"mousedown":"click"},e.prototype.focus=function(e){var t;o&&e.setSelectionRange&&0!==e.type.indexOf("date")&&"time"!==e.type&&"month"!==e.type?(t=e.value.length,e.setSelectionRange(t,t)):e.focus()},e.prototype.updateScrollParent=function(e){var t,n;if(t=e.fastClickScrollParent,!t||!t.contains(e)){n=e;do{if(n.scrollHeight>n.offsetHeight){t=n,e.fastClickScrollParent=n;break}n=n.parentElement}while(n)}t&&(t.fastClickLastScrollTop=t.scrollTop)},e.prototype.getTargetElementFromEventTarget=function(e){return e.nodeType===Node.TEXT_NODE?e.parentNode:e},e.prototype.onTouchStart=function(e){var t,n,i;if(e.targetTouches.length>1)return!0;if(t=this.getTargetElementFromEventTarget(e.target),n=e.targetTouches[0],o){if(i=window.getSelection(),i.rangeCount&&!i.isCollapsed)return!0;if(!r){if(n.identifier&&n.identifier===this.lastTouchIdentifier)return e.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(t)}}return this.trackingClick=!0,this.trackingClickStart=e.timeStamp,this.targetElement=t,this.touchStartX=n.pageX,this.touchStartY=n.pageY,e.timeStamp-this.lastClickTime<this.tapDelay&&e.preventDefault(),!0},e.prototype.touchHasMoved=function(e){var t=e.changedTouches[0],n=this.touchBoundary;return Math.abs(t.pageX-this.touchStartX)>n||Math.abs(t.pageY-this.touchStartY)>n},e.prototype.onTouchMove=function(e){return!this.trackingClick||((this.targetElement!==this.getTargetElementFromEventTarget(e.target)||this.touchHasMoved(e))&&(this.trackingClick=!1,this.targetElement=null),!0)},e.prototype.findControl=function(e){return void 0!==e.control?e.control:e.htmlFor?document.getElementById(e.htmlFor):e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},e.prototype.onTouchEnd=function(e){var t,a,c,l,s,u=this.targetElement;if(!this.trackingClick)return!0;if(e.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(e.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=e.timeStamp,a=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,i&&(s=e.changedTouches[0],u=document.elementFromPoint(s.pageX-window.pageXOffset,s.pageY-window.pageYOffset)||u,u.fastClickScrollParent=this.targetElement.fastClickScrollParent),c=u.tagName.toLowerCase(),"label"===c){if(t=this.findControl(u)){if(this.focus(u),n)return!1;u=t}}else if(this.needsFocus(u))return e.timeStamp-a>100||o&&window.top!==window&&"input"===c?(this.targetElement=null,!1):(this.focus(u),this.sendClick(u,e),o&&"select"===c||(this.targetElement=null,e.preventDefault()),!1);return!(!o||r||(l=u.fastClickScrollParent,!l||l.fastClickLastScrollTop===l.scrollTop))||(this.needsClick(u)||(e.preventDefault(),this.sendClick(u,e)),!1)},e.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},e.prototype.onMouse=function(e){return!this.targetElement||(!!e.forwardedTouchEvent||(!e.cancelable||(!(!this.needsClick(this.targetElement)||this.cancelNextClick)||(e.stopImmediatePropagation?e.stopImmediatePropagation():e.propagationStopped=!0,e.stopPropagation(),e.preventDefault(),!1))))},e.prototype.onClick=function(e){var t;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===e.target.type&&0===e.detail||(t=this.onMouse(e),t||(this.targetElement=null),t)},e.prototype.destroy=function(){var e=this.layer;n&&(e.removeEventListener("mouseover",this.onMouse,!0),e.removeEventListener("mousedown",this.onMouse,!0),e.removeEventListener("mouseup",this.onMouse,!0)),e.removeEventListener("click",this.onClick,!0),e.removeEventListener("touchstart",this.onTouchStart,!1),e.removeEventListener("touchmove",this.onTouchMove,!1),e.removeEventListener("touchend",this.onTouchEnd,!1),e.removeEventListener("touchcancel",this.onTouchCancel,!1)},e.notNeeded=function(e){var t,o,r,i;if("undefined"==typeof window.ontouchstart)return!0;if(o=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!n)return!0;if(t=document.querySelector("meta[name=viewport]")){if(t.content.indexOf("user-scalable=no")!==-1)return!0;if(o>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(a&&(r=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),r[1]>=10&&r[2]>=3&&(t=document.querySelector("meta[name=viewport]")))){if(t.content.indexOf("user-scalable=no")!==-1)return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===e.style.msTouchAction||"manipulation"===e.style.touchAction||(i=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1],!!(i>=27&&(t=document.querySelector("meta[name=viewport]"),t&&(t.content.indexOf("user-scalable=no")!==-1||document.documentElement.scrollWidth<=window.outerWidth)))||("none"===e.style.touchAction||"manipulation"===e.style.touchAction))},e.attach=function(t,n){return new e(t,n)},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return e}):"undefined"!=typeof module&&module.exports?(module.exports=e.attach,module.exports.FastClick=e):window.FastClick=e}(),function(e,t){"use strict";function n(e){if(!("clientX"in e||"clientY"in e)){var t=e.touches||e.originalEvent.touches;t&&t.length&&(e.clientX=t[0].clientX,e.clientY=t[0].clientY),e.preventDefault()}}function o(e){if(e=e[0],e.previousElementSibling)return t.element(e.previousElementSibling);for(var n=e.previousSibling;null!=n&&1!=n.nodeType;)n=n.previousSibling;return t.element(n)}function r(e,t){var n=o(e);n.length>0?n.after(t):e.parent().prepend(t)}function i(e,n){if(e instanceof t.element&&(e=e[0]),null!==l)return e[l](n)}var a=t.module("angular-sortable-view",[]);a.directive("svRoot",[function(){function e(e,t,n){return n?e.x-t.x<0:e.y-t.y<0}function t(e){return a[e]}function n(e){delete a[e]}var o,a=Object.create(null);return{restrict:"A",controller:["$scope","$attrs","$interpolate","$parse",function(c,l,s,u){var d=s(l.svRoot)(c)||c.$id;a[d]||(a[d]=[]);var h,f,p,m,v,g,y=!1,k=u(l.svOnSort);l.svOnStart=l.$$element[0].attributes["sv-on-start"],l.svOnStart=l.svOnStart&&l.svOnStart.value,l.svOnStop=l.$$element[0].attributes["sv-on-stop"],l.svOnStop=l.svOnStop&&l.svOnStop.value;var w=u(l.svOnStart),E=u(l.svOnStop);if(this.sortingInProgress=function(){return o},l.svGrid){if(y="true"===l.svGrid||"false"!==l.svGrid&&null,null===y)throw"Invalid value of sv-grid attribute"}else c.$watchCollection(function(){return t(d)},function(e){y=!1;var t=e.filter(function(e){return!e.container}).map(function(e){return{part:e.getPart().id,y:e.element[0].getBoundingClientRect().top}}),n=Object.create(null);t.forEach(function(e){n[e.part]?n[e.part].push(e.y):n[e.part]=[e.y]}),Object.keys(n).forEach(function(e){n[e].sort(),n[e].forEach(function(t,o){o<n[e].length-1&&t>0&&t===n[e][o+1]&&(y=!0)})})});this.$moveUpdate=function(n,a,l,s,u,k,E){var b=l[0].getBoundingClientRect();"element"===n.tolerance&&(a={x:~~(b.left+b.width/2),y:~~(b.top+b.height/2)}),o=!0,h=[],f||(u?(f=u.clone(),f.removeClass("ng-hide")):(f=s.clone(),f.addClass("sv-visibility-hidden"),f.addClass("sv-placeholder"),f.css({height:b.height+"px",width:b.width+"px"})),s.after(f),s.addClass("ng-hide"),v=s,p=n,m=l,w(c,{$helper:{element:m},$part:k.model(k.scope),$index:E,$item:k.model(k.scope)[E]}),c.$root&&c.$root.$$phase||c.$apply()),m[0].reposition({x:a.x+document.body.scrollLeft-a.offset.x*b.width,y:a.y+document.body.scrollTop-a.offset.y*b.height}),t(d).forEach(function(t,o){if(null==n.containment||i(t.element,n.containment)||i(t.element,n.containment+" *")){var r=t.element[0].getBoundingClientRect(),c={x:~~(r.left+r.width/2),y:~~(r.top+r.height/2)};t.container||!t.element[0].scrollHeight&&!t.element[0].scrollWidth||h.push({element:t.element,q:(c.x-a.x)*(c.x-a.x)+(c.y-a.y)*(c.y-a.y),view:t.getPart(),targetIndex:t.getIndex(),after:e(c,a,y)}),t.container&&!t.element[0].querySelector("[sv-element]:not(.sv-placeholder):not(.sv-source)")&&h.push({element:t.element,q:(c.x-a.x)*(c.x-a.x)+(c.y-a.y)*(c.y-a.y),view:t.getPart(),targetIndex:0,container:!0})}});var C=f[0].getBoundingClientRect(),S={x:~~(C.left+C.width/2),y:~~(C.top+C.height/2)};h.push({q:(S.x-a.x)*(S.x-a.x)+(S.y-a.y)*(S.y-a.y),element:f,placeholder:!0}),h.sort(function(e,t){return e.q-t.q}),h.forEach(function(e,t){0!==t||e.placeholder||e.container?0===t&&e.container?(g=e,e.element.append(f)):e.element.removeClass("sv-candidate"):(g=e,e.element.addClass("sv-candidate"),e.after?e.element.after(f):r(e.element,f))})},this.$drop=function(e,t,n){function r(){if(o=!1,f.remove(),m.remove(),v.removeClass("ng-hide"),h=void 0,f=void 0,n=void 0,m=void 0,v=void 0,E(c,{$part:e.model(e.scope),$index:t,$item:e.model(e.scope)[t]}),g){g.element.removeClass("sv-candidate");var r=e.model(e.scope).splice(t,1),i=g.targetIndex;g.view===e&&g.targetIndex>t&&i--,g.after&&i++,g.view.model(g.view.scope).splice(i,0,r[0]),g.view===e&&t===i||k(c,{$partTo:g.view.model(g.view.scope),$partFrom:e.model(e.scope),$item:r[0],$indexTo:i,$indexFrom:t})}g=void 0,c.$root&&c.$root.$$phase||c.$apply()}if(f)if(n.revert){var i=f[0].getBoundingClientRect(),a=m[0].getBoundingClientRect(),l=Math.sqrt(Math.pow(a.top-i.top,2)+Math.pow(a.left-i.left,2)),s=+n.revert*l/200;s=Math.min(s,+n.revert),["-webkit-","-moz-","-ms-","-o-",""].forEach(function(e){"undefined"!=typeof m[0].style[e+"transition"]&&(m[0].style[e+"transition"]="all "+s+"ms ease")}),setTimeout(r,s),m.css({top:i.top+document.body.scrollTop+"px",left:i.left+document.body.scrollLeft+"px"})}else r()},this.addToSortableElements=function(e){t(d).push(e)},this.removeFromSortableElements=function(e){var o=t(d),r=o.indexOf(e);r>-1&&(o.splice(r,1),0===o.length&&n(d))}}]}}]),a.directive("svPart",["$parse",function(e){return{restrict:"A",require:"^svRoot",controller:["$scope",function(e){e.$ctrl=this,this.getPart=function(){return e.part},this.$drop=function(t,n){e.$sortableRoot.$drop(e.part,t,n)}}],scope:!0,link:function(t,n,o,r){if(!o.svPart)throw new Error("no model provided");var i=e(o.svPart);if(!i.assign)throw new Error("model not assignable");t.part={id:t.$id,element:n,model:i,scope:t},t.$sortableRoot=r;var a={element:n,getPart:t.$ctrl.getPart,container:!0};r.addToSortableElements(a),t.$on("$destroy",function(){r.removeFromSortableElements(a)})}}}]),a.directive("svElement",["$parse",function(e){return{restrict:"A",require:["^svPart","^svRoot"],controller:["$scope",function(e){e.$ctrl=this}],link:function(o,r,i,a){function c(c){function l(e){n(e),f||(r.parent().prepend(v),f=!0),a[1].$moveUpdate(u,{x:e.clientX,y:e.clientY,offset:k},v,r,h,a[0].getPart(),o.$index)}if(n(c),!a[1].sortingInProgress()&&(0==c.button||"mousedown"!==c.type)){f=!1;var u=e(i.svElement)(o);if(u=t.extend({},{tolerance:"pointer",revert:200,containment:"html"},u),u.containment)var m=s.call(r,u.containment)[0].getBoundingClientRect();var v,g=r,y=r[0].getBoundingClientRect();d||(d=a[0].helper),h||(h=a[0].placeholder),d?(v=d.clone(),v.removeClass("ng-hide"),v.css({left:y.left+document.body.scrollLeft+"px",top:y.top+document.body.scrollTop+"px"}),g.addClass("sv-visibility-hidden")):(v=g.clone(),v.addClass("sv-helper").css({left:y.left+document.body.scrollLeft+"px",top:y.top+document.body.scrollTop+"px",width:y.width+"px"})),v[0].reposition=function(e){var t=e.x,n=e.y,o=v[0].getBoundingClientRect(),r=document.body;m&&(n<m.top+r.scrollTop&&(n=m.top+r.scrollTop),n+o.height>m.top+r.scrollTop+m.height&&(n=m.top+r.scrollTop+m.height-o.height),t<m.left+r.scrollLeft&&(t=m.left+r.scrollLeft),t+o.width>m.left+r.scrollLeft+m.width&&(t=m.left+r.scrollLeft+m.width-o.width)),this.style.left=t-r.scrollLeft+"px",this.style.top=n-r.scrollTop+"px"};var k={x:(c.clientX-y.left)/y.width,y:(c.clientY-y.top)/y.height};p.addClass("sv-sorting-in-progress"),p.on("mousemove touchmove",l).on("mouseup touchend touchcancel",function w(e){p.off("mousemove touchmove",l),p.off("mouseup touchend",w),p.removeClass("sv-sorting-in-progress"),f&&a[0].$drop(o.$index,u),r.removeClass("sv-visibility-hidden")})}}var l={element:r,getPart:a[0].getPart,getIndex:function(){return o.$index}};a[1].addToSortableElements(l),o.$on("$destroy",function(){a[1].removeFromSortableElements(l)});var u=r;u.on("mousedown touchstart",c),o.$watch("$ctrl.handle",function(e){e&&(u.off("mousedown touchstart",c),u=e,u.on("mousedown touchstart",c))});var d;o.$watch("$ctrl.helper",function(e){e&&(d=e)});var h;o.$watch("$ctrl.placeholder",function(e){e&&(h=e)});var f,p=(t.element(document.body),t.element(document.documentElement))}}}]),a.directive("svHandle",function(){return{require:"?^svElement",link:function(e,t,n,o){o&&(o.handle=t.add(o.handle))}}}),a.directive("svHelper",function(){return{require:["?^svPart","?^svElement"],link:function(e,t,n,o){t.addClass("sv-helper").addClass("ng-hide"),o[1]?o[1].helper=t:o[0]&&(o[0].helper=t)}}}),a.directive("svPlaceholder",function(){return{require:["?^svPart","?^svElement"],link:function(e,t,n,o){t.addClass("sv-placeholder").addClass("ng-hide"),o[1]?o[1].placeholder=t:o[0]&&(o[0].placeholder=t)}}}),t.element(document.head).append(["<style>.sv-helper{position: fixed !important;z-index: 99999;margin: 0 !important;}.sv-candidate{}.sv-placeholder{}.sv-sorting-in-progress{-webkit-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;}.sv-visibility-hidden{visibility: hidden !important;opacity: 0 !important;}</style>"].join(""));var c=document.documentElement,l=c.matches?"matches":c.matchesSelector?"matchesSelector":c.webkitMatches?"webkitMatches":c.webkitMatchesSelector?"webkitMatchesSelector":c.msMatches?"msMatches":c.msMatchesSelector?"msMatchesSelector":c.mozMatches?"mozMatches":c.mozMatchesSelector?"mozMatchesSelector":null;if(null==l)throw"This browser doesn't support the HTMLElement.matches method";var s=t.element.prototype.closest||function(e){for(var n=this[0].parentNode;n!==document.documentElement&&!n[l](e);)n=n.parentNode;return n[l](e)?t.element(n):t.element()};"function"!=typeof t.element.prototype.add&&(t.element.prototype.add=function(e){var n,o=t.element();for(e=t.element(e),n=0;n<this.length;n++)o.push(this[n]);for(n=0;n<e.length;n++)o.push(e[n]);return o})}(window,window.angular);